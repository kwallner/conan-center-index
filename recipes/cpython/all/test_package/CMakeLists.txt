project(PackageTest CXX)
cmake_minimum_required(VERSION 3.12)

include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)

if (TEST_PACKAGE_VARIANT STREQUAL "conan_libs")
    conan_basic_setup()
    add_executable(test_package test_package.cpp)
    target_link_libraries(test_package ${CONAN_LIBS})
elseif (TEST_PACKAGE_VARIANT STREQUAL "conan_targets")
    conan_basic_setup(TARGETS)
    add_executable(test_package test_package.cpp)
    target_link_libraries(test_package CONAN_PKG::cpython)
elseif (TEST_PACKAGE_VARIANT STREQUAL "conan_find_package")
    conan_basic_setup()
    find_package(cpython REQUIRED)
    add_executable(test_package test_package.cpp)
    target_link_libraries(test_package cpython::cpython)
elseif (TEST_PACKAGE_VARIANT STREQUAL "cmake_find_package")
    conan_basic_setup()
    find_package(Python3 REQUIRED COMPONENTS Development.Embed)
    add_executable(test_package test_package.cpp)
    target_link_libraries(test_package Python3::Python)
else()
    message(FATAL_ERROR "Invalid test variant.")
endif()
set_target_properties(test_package PROPERTIES OUTPUT_NAME "test_package-${TEST_PACKAGE_VARIANT}")


